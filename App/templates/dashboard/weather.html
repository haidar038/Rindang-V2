<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Dashboard - Penjualan</title>

        <meta name="keywords" content="rindang sistem informasi pangan kota ternate kebutuhan cabai barito rica tanam petani" />
        <meta property="og:title" content="RINDANG - Rica Tanam Dalam Kampung" />
        <meta property="og:description" content="Sistem Informasi kebutuhan pangan dan informasi pangan Kota Ternate" />
        <meta property="og:image" content="https://i.ibb.co/grnRZSB/og-thumbnail.webp" />
        <meta property="og:url" content="https://rindang.vercel.app" />
        <meta property="og:type" content="website" />

        <!-- FAVICONS -->
        <link rel="apple-touch-icon" sizes="180x180" href="../../static/favicons/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="../../static/favicons/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="../../static/favicons/favicon-16x16.png" />
        <link rel="manifest" href="../../static/favicons/site.webmanifest" />
        <link rel="mask-icon" href="../../static/favicons/safari-pinned-tab.svg" color="#5bbad5" />
        <meta name="msapplication-TileColor" content="#ffc40d" />
        <meta name="theme-color" content="#ffffff" />

        <link rel="stylesheet" href="{{ url_for('static', filename='style.css' ) }}" />
        <link rel="stylesheet" href="../../static/admin/css/styles.min.css" />
        <link rel="stylesheet" href="../../static/admin/css/base-color.css" />
        <!-- <link rel="stylesheet" href="../../static/admin/css/font-size.css" /> -->

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    </head>

    <body>
        <!--  Body Wrapper -->
        <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed" data-header-position="fixed">
            <!-- Sidebar Start -->
            <aside class="left-sidebar">
                <!-- Sidebar scroll-->
                <div>
                    <div class="brand-logo d-flex align-items-center justify-content-between">
                        <a href="{{ url_for('views.dashboard' ) }}" class="text-nowrap logo-img">
                            <img src="../../static/img/rindang-logo-red.svg" width="180" alt="" />
                        </a>
                        <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
                            <i class="ti ti-x fs-8"></i>
                        </div>
                    </div>
                    <!-- Sidebar navigation-->
                    <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
                        <ul id="sidebarnav">
                            <li class="nav-small-cap">
                                <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                                <span class="hide-menu">Home</span>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="{{ url_for('views.dashboard' ) }}" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-home"></i>
                                    </span>
                                    <span class="hide-menu">Dashboard</span>
                                </a>
                            </li>
                            <li class="nav-small-cap">
                                <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                                <span class="hide-menu">DATA & STATISTIK</span>
                            </li>
                            <!-- <li class="sidebar-item">
                            <a class="sidebar-link" href="./ui-buttons.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-currency-dollar"></i>
                                </span>
                                <span class="hide-menu">Harga Pangan</span>
                            </a>
                        </li> -->
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="{{ url_for('views.hargapangan' ) }}" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-currency-dollar"></i>
                                    </span>
                                    <span class="hide-menu">Harga Pangan</span>
                                </a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="{{ url_for('views.dataproduksi' ) }}" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-seeding"></i>
                                    </span>
                                    <span class="hide-menu">Data Produksi</span>
                                </a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="{{ url_for('views.penjualan' ) }}" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-truck"></i>
                                    </span>
                                    <span class="hide-menu">Penjualan</span>
                                </a>
                            </li>
                            <li class="nav-small-cap">
                                <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                                <span class="hide-menu">Fitur Rindang</span>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="{{ url_for('views.weather' ) }}" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-haze"></i>
                                    </span>
                                    <span class="hide-menu">Pantauan Cuaca</span>
                                </a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="./authentication-register.html" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-message"></i>
                                    </span>
                                    <span class="hide-menu">Forum</span>
                                </a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="./authentication-register.html" aria-expanded="false">
                                    <span>
                                        <i class="ti ti-article"></i>
                                    </span>
                                    <span class="hide-menu">Artikel</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <!-- End Sidebar navigation -->
                </div>
                <!-- End Sidebar scroll-->
            </aside>
            <!--  Sidebar End -->
            <!--  Main wrapper -->
            <div class="body-wrapper">
                <!--  Header Start -->
                <header class="app-header">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <ul class="navbar-nav">
                            <li class="nav-item d-block d-xl-none">
                                <a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
                                    <i class="ti ti-menu-2"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link nav-icon-hover" href="javascript:void(0)" id="drop1" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="ti ti-bell-ringing"></i>
                                    <div class="bg-primary rounded-circle"></div>
                                    <!-- <div class="notification bg-primary rounded-circle"></div> -->
                                </a>
                                <div class="dropdown-menu dropdown-menu-start dropdown-menu-animate-up" aria-labelledby="drop1">
                                    <div class="message-body">
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-user fs-6"></i>
                                            <p class="mb-0 fs-3">My Profile</p>
                                        </a>
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-mail fs-6"></i>
                                            <p class="mb-0 fs-3">My Account</p>
                                        </a>
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-list-check fs-6"></i>
                                            <p class="mb-0 fs-3">My Task</p>
                                        </a>
                                        <a href="{{ url_for('views.weather' ) }}" class="btn btn-outline-green mx-3 mt-2 d-block">Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
                            <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
                                <li class="nav-item dropdown">
                                    <a class="nav-link nav-icon-hover" href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown" aria-expanded="false">
                                        <img src="../../static/admin/images/profile/user-1.jpg" alt="" width="35" height="35" class="rounded-circle" />
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up" aria-labelledby="drop2">
                                        <div class="message-body">
                                            <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                                <i class="ti ti-user fs-6"></i>
                                                <p class="mb-0 fs-3">Edit Profil</p>
                                            </a>
                                            <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                                <i class="ti ti-settings fs-6"></i>
                                                <p class="mb-0 fs-3">Pengaturan</p>
                                            </a>
                                            <a href="{{ url_for('views.weather' ) }}" class="btn btn-outline-green mx-3 mt-2 d-block">Keluar</a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </header>
                <!--  Header End -->
                <div class="container-fluid">
                    <!--  Row 1 -->
                    <div class="row">
                        <div class="col-lg-12 col-12 d-flex flex-column">
                            <div class="card">
                                <div class="card-body weather-container" id="weather-data"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="../../static/admin/libs/jquery/dist/jquery.min.js"></script>
        <script src="../../static/admin/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="../../static/admin/js/sidebarmenu.js"></script>
        <script src="../../static/admin/js/app.min.js"></script>
        <script src="../../static/admin/libs/apexcharts/dist/apexcharts.min.js"></script>
        <script src="../../static/admin/libs/simplebar/dist/simplebar.js"></script>
        <!-- <script src="../../static/admin/js/dashboard.js"></script> -->
        <script>
            // Replace with the actual URL if you're fetching from the remote API
            const url = "https://data.bmkg.go.id/DataMKG/MEWS/DigitalForecast/DigitalForecast-MalukuUtara.xml";

            fetch(url)
                .then((response) => response.text()) // Convert response to text (XML)
                .then((xmlString) => {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xmlString, "text/xml");

                    // Function to find area by ID
                    function findAreaById(areaId) {
                        const areas = xmlDoc.querySelectorAll("area");
                        for (let i = 0; i < areas.length; i++) {
                            if (areas[i].getAttribute("id") === areaId) {
                                return areas[i];
                            }
                        }
                        return null;
                    }

                    // Function to extract data from a parameter element
                    function extractParameterData(parameterElement, unit) {
                        const timeranges = parameterElement.querySelectorAll("timerange");
                        const values = [];
                        for (let i = 0; i < timeranges.length; i++) {
                            const valueElement = timeranges[i].querySelector(`value[unit='${unit}']`);
                            if (valueElement) {
                                values.push(valueElement.textContent);
                            }
                        }
                        return values;
                    }

                    // Example usage: Find area with ID 501394
                    const areaIdToFind = "501394";
                    const foundArea = findAreaById(areaIdToFind);

                    if (foundArea) {
                        // Extract data
                        const humidityData = extractParameterData(foundArea.querySelector("parameter[id='hu']"), "%");
                        const temperatureData = extractParameterData(foundArea.querySelector("parameter[id='t']"), "C");
                        const weatherData = extractParameterData(foundArea.querySelector("parameter[id='weather']"), "icon");
                        const windDirectionData = extractParameterData(foundArea.querySelector("parameter[id='wd']"), "deg");
                        const windSpeedData = extractParameterData(foundArea.querySelector("parameter[id='ws']"), "Kt");

                        // Process and display the data as needed
                        for (let i = 0; i < humidityData.length; i++) {
                            const humidity = humidityData[i];
                            const temperature = temperatureData[i];
                            const weatherCode = weatherData[i];
                            const windDirection = windDirectionData[i];
                            const windSpeed = windSpeedData[i];

                            // ... (display or process data)
                        }

                        console.log(humidityData);
                        console.log(temperatureData);
                        console.log(weatherData);
                        console.log(windDirectionData);
                        console.log(windSpeedData);
                    } else {
                        console.log("Area dengan ID", areaIdToFind, "tidak ditemukan.");
                    }

                    // ... (rest of the script)
                })
                .catch((error) => {
                    console.error("Error fetching or parsing XML data:", error);
                });
        </script>
    </body>
</html>
